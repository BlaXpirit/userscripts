// ==UserScript==
// @name         SteamDB sales page improvements
// @description  Add buttons to hide non-"highest recorded discount"
// @version      4
// @include      https://steamdb.info/sales/*
// @run-at       document-end
// @author       Oleh Prypin
// @namespace    http://blaxpirit.com/
// ==/UserScript==
// Generated by LiveScript 1.5.0
var $, appliedStyles, applyStyle, ref$, col1, col2;
$ = jQuery;
appliedStyles = {};
applyStyle = function(css, enable){
  enable == null && (enable = true);
  if (enable) {
    appliedStyles[css] = $('<style>').html(css).appendTo('head');
  } else {
    appliedStyles[css].remove();
  }
};
$('.dataTables_length select').val(-1).trigger('change');
ref$ = $('#js-filters>div'), col1 = ref$[0], col2 = ref$[1];
$('<div class="steamy-checkbox-control"><div class="steamy-checkbox"></div><span class="steamy-checkbox-label">Hide "not interested"</span></div>').appendTo(col1).click(function(){
  var checked;
  checked = $(this).toggleClass('checked').hasClass('checked');
  applyStyle('.ignored { display: none; }', checked);
}).click();
$('<div class="steamy-checkbox-control">\n    Show only lowest:\n    <span class="btn btn-sm btn-social">&le;</span>\n    <span class="btn btn-sm btn-social">&lt;</span>\n</div>').appendTo(col1).find('span').click(function(){
  var sel;
  sel = $(this).text() === '<' ? ':not(:has(.price-discount-major))' : ':has(.highest-discount)';
  $("table.table-sales tr.app" + sel).hide();
});
$('#js-merged-checkbox').appendTo(col2);
